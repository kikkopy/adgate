(function(){class A{constructor(c={}){this.d=false;this.p=null;this.c={s:c.sensitivity||'medium',r:c.retryInterval||30000,w:c.whitelist||[],t:c.theme||'dark',...c};this.m=new Map();this.i()}i(){if(this.sk())return;this.lm();this.sd()}sk(){return this.c.w.includes(location.hostname)||/bot|crawler|spider/i.test(navigator.userAgent)}lm(){this.m.set('h',()=>this.th());this.m.set('n',()=>this.tn());this.m.set('c',()=>this.tc());this.m.set('d',()=>this.td());this.m.set('p',()=>this.tp());this.m.set('m',()=>this.tm());this.m.set('e',()=>this.te());this.m.set('w',()=>this.tw())}async sd(){try{const r=await Promise.allSettled(Array.from(this.m.values()).map(m=>this.rt(m(),2000)));this.d=r.some(x=>x.status==='fulfilled'&&x.value);if(this.d)this.sp()}catch(e){console.warn('AdGate error:',e)}}rt(p,t){return Promise.race([p,new Promise((_,r)=>setTimeout(()=>r(new Error('timeout')),t))])}async th(){const e=['ads','advertisement','banner','popup','sponsor'];for(let c of e){const el=document.createElement('div');el.className=c;el.style.cssText='position:absolute;left:-9999px;width:1px;height:1px;';document.body.appendChild(el);await new Promise(r=>setTimeout(r,50));const s=window.getComputedStyle(el);const b=el.getBoundingClientRect();document.body.removeChild(el);if(s.display==='none'||s.visibility==='hidden'||b.height===0)return true}return false}async tn(){const u=['pagead2.googlesyndication.com','doubleclick.net','googleadservices.com'];try{const r=await Promise.allSettled(u.map(d=>fetch(`https://${d}/favicon.ico?t=${Date.now()}`,{mode:'no-cors',cache:'no-cache'})));return r.some(x=>x.status==='rejected')}catch{return true}}async tc(){const st=document.createElement('style');st.textContent='.at{position:absolute!important;left:-9999px!important;width:1px!important;height:1px!important;}';document.head.appendChild(st);const t=document.createElement('div');t.className='at ads ad banner';document.body.appendChild(t);await new Promise(r=>setTimeout(r,100));const v=window.getComputedStyle(t).display==='none'||t.offsetHeight===0;document.body.removeChild(t);document.head.removeChild(st);return v}async td(){const st=performance.now();for(let i=0;i<50;i++){const d=document.createElement('div');d.className='ad';d.style.display='none';document.body.appendChild(d);document.body.removeChild(d)}return performance.now()-st>100}tp(){return new Promise(r=>{try{const o=new MutationObserver(m=>{m.forEach(mu=>{mu.removedNodes.forEach(n=>{if(n.className&&/ad|banner/.test(n.className)){o.disconnect();r(true)}})})});o.observe(document.body,{childList:true,subtree:true});setTimeout(()=>{o.disconnect();r(false)},1000)}catch{r(false)}})}tm(){return navigator.plugins&&Array.from(navigator.plugins).some(p=>/adblock|ublock/i.test(p.name))}async te(){return new Promise(r=>{const h=e=>{if(e.filename&&/ads|doubleclick/.test(e.filename)){window.removeEventListener('error',h);r(true)}};window.addEventListener('error',h);setTimeout(()=>{window.removeEventListener('error',h);r(false)},1000)})}tw(){return new Promise(r=>{try{const w=new Worker('data:text/javascript,postMessage("test")');w.onmessage=()=>{w.terminate();r(false)};w.onerror=()=>{w.terminate();r(true)};setTimeout(()=>{w.terminate();r(false)},500)}catch{r(true)}})}sp(){if(this.p)return;const o=document.createElement('div');o.style.cssText='position:fixed;top:0;left:0;width:100vw;height:100vh;backdrop-filter:blur(8px);z-index:999998;pointer-events:none';document.body.appendChild(o);this.p=document.createElement('div');this.p.style.cssText='position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);z-index:999999;display:flex;align-items:center;justify-content:center;font-family:system-ui,sans-serif';const m=document.createElement('div');m.style.cssText=`background:${this.c.t==='light'?'#fff':'#1a1a1a'};border:2px solid ${this.c.t==='light'?'#ddd':'#333'};border-radius:16px;padding:40px;text-align:center;max-width:450px;color:${this.c.t==='light'?'#333':'#fff'};box-shadow:0 25px 50px rgba(0,0,0,0.5);animation:slideIn 0.3s ease-out`;const s=document.createElement('style');s.textContent='@keyframes slideIn{from{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}';document.head.appendChild(s);m.innerHTML=`<h2 style="margin:0 0 24px 0;font-size:24px;font-weight:700;">Adblock Detected</h2><p style="margin:0 0 32px 0;line-height:1.6;font-size:16px;opacity:0.9;">Please disable your adblock to access this content.<br>We rely on ads to keep our service free.</p><button id="ag-btn" style="background:${this.c.t==='light'?'#007bff':'#0ea5e9'};color:white;border:none;padding:14px 32px;border-radius:10px;font-size:16px;cursor:pointer;font-weight:600;width:100%;margin-bottom:20px;transition:all 0.2s;">I've disabled it</button><p style="margin:0;font-size:14px;opacity:0.6;cursor:pointer;" onclick="window.open('https://github.com/kikkopy','_blank')">Powered by AdGate</p>`;this.p.appendChild(m);document.body.appendChild(this.p);document.getElementById('ag-btn').onclick=()=>window.location.reload();document.body.style.overflow='hidden';this.pr()}pr(){if(!this.p)return;const o=new MutationObserver(m=>{m.forEach(mu=>{mu.removedNodes.forEach(n=>{if(n===this.p&&this.d){document.body.appendChild(this.p);document.body.style.overflow='hidden'}})})});o.observe(document.body,{childList:true});setInterval(()=>{if(this.d&&!document.contains(this.p)){document.body.appendChild(this.p);document.body.style.overflow='hidden'}},5000)}rc(){setInterval(async()=>{if(Math.random()<0.2)await this.sd()},this.c.r+Math.random()*15000)}}function init(){const a=new A(window.AdGateConfig||{});document.addEventListener('visibilitychange',()=>{if(!document.hidden)setTimeout(()=>a.sd(),1000+Math.random()*2000)});a.rc()}if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',init);else init()})();
